{% load i18n %}
{% load compress %}
<form action="." method="post">
    {% csrf_token %}
    <input name="{{ timeline_form.title.name }}" type="text" class="span12" placeholder="{{ timeline_form.title.label }}" value="{{ timeline_form.title.value|default_if_none:"" }}">

    <div class="controls controls-row">
        <input name="{{ timeline_form.date_start.name }}" type="text" class="span6" placeholder="{{ timeline_form.date_start.label }}" value="{{ timeline_form.date_start.value|date:"m/d/Y G:i" }}">
        <input name="{{ timeline_form.date_end.name }}" type="text" class="span6" placeholder="{{ timeline_form.date_end.label }}" value="{{ timeline_form.date_end.value|date:"m/d/Y G:i" }}" style="margin-left: 22px;" >
    </div>

    <textarea name="{{ timeline_form.description.name }}" rows="5" class="span12" placeholder="{{ timeline_form.description.label }}">{{ timeline_form.description.value|default_if_none:"" }}</textarea>
    <div class="controls controls-row">
        {{ timeline_form.apps }}
    </div>
    <p>Select with Ctrl</p>
    <div align="right">
        <a class="btn btn-primary">{% trans "Save" %}</a>
{#        <a class="btn btn-success">{% trans "Publish" %}</a>#}
    </div>
</form>
{% compress js inline %}
    <script type="text/javascript">
        jQuery(function ($) {
            /* Click to save button */
            $('a.btn.btn-primary').click(function () { $('form').submit(); });
            /* Date Start */
            $('input[name="{{ timeline_form.date_start.name }}"]').datetimepicker({
                dateFormat: 'mm/dd/yy',
                timeFormat: 'hh:mm',
                onSelect: function( selectedDate ) {
                    $( 'input[name="{{ timeline_form.date_end.name }}"]' ).datetimepicker( "option", "minDate", selectedDate );
                }
            });
            /* Date End */
            $( 'input[name="{{ timeline_form.date_end.name }}"]' ).datetimepicker({
                dateFormat: 'mm/dd/yy',
                timeFormat: 'hh:mm',
                onSelect: function( selectedDate ) {
                    $( 'input[name="{{ timeline_form.date_start.name }}"]' ).datetimepicker( "option", "maxDate", selectedDate );
                }
            });
        });
    </script>
{% endcompress %}